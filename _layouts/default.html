<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

    <aside class="js-side-nav side-nav">
      <nav class="js-side-nav-container side-nav__container">
        <button class="js-menu-hide side-nav__hide">&#x2715;</button>
        <header class="side-nav__header">
          Men√∫
        </header>
        <ul class="side-nav__content">
          <li class="side-nav-item">{% include icon-twitter.html username=site.twitter_username %}</li>
          <li class="side-nav-item">{% include icon-github.html username=site.github_username %}</li>
          <li class="side-nav-item"><a href="/">Blog</a></li>
          <li class="side-nav-item"><a href="/about">About</a></li>
        </ul>
      </nav>
    </aside>



    {% include header.html %}

    <div class="page-content" flex align="center">
      
        {{ content }}
      
    </div>

    {% include footer.html %}

    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-52103164-1');ga('send','pageview');
  </script>
  <script>
    'use strict';

    class SideNav {
      constructor () {
        this.showButtonEl = document.querySelector('.js-menu-show');
        this.hideButtonEl = document.querySelector('.js-menu-hide');
        this.sideNavEl = document.querySelector('.js-side-nav');
        this.sideNavContainerEl = document.querySelector('.js-side-nav-container');

        this.showSideNav = this.showSideNav.bind(this);
        this.hideSideNav = this.hideSideNav.bind(this);
        this.blockClicks = this.blockClicks.bind(this);
        this.onTouchStart = this.onTouchStart.bind(this);
        this.onTouchMove = this.onTouchMove.bind(this);
        this.onTouchEnd = this.onTouchEnd.bind(this);
        this.onTransitionEnd = this.onTransitionEnd.bind(this);
        this.update = this.update.bind(this);

        this.startX = 0;
        this.currentX = 0;
        this.touchingSideNav = false;

        this.addEventListeners();
      }

      addEventListeners () {
        this.showButtonEl.addEventListener('click', this.showSideNav);
        this.hideButtonEl.addEventListener('click', this.hideSideNav);
        this.sideNavEl.addEventListener('click', this.hideSideNav);
        this.sideNavContainerEl.addEventListener('click', this.blockClicks);

        document.addEventListener('touchstart', this.onTouchStart);
        document.addEventListener('touchmove', this.onTouchMove);
        document.addEventListener('touchend', this.onTouchEnd);
      }

      onTouchStart (evt) {
        if (!this.sideNavEl.classList.contains('side-nav--visible'))
          return;

        this.startX = evt.touches[0].pageX;
        this.currentX = this.startX;

        this.touchingSideNav = true;
        requestAnimationFrame(this.update);
      }

      onTouchMove (evt) {
        if (!this.touchingSideNav)
          return;

        this.currentX = evt.touches[0].pageX;
        const translateX = Math.min(0, this.currentX - this.startX);

        if (translateX < 0) {
          evt.preventDefault();
        }
      }

      onTouchEnd (evt) {
        if (!this.touchingSideNav)
          return;

        this.touchingSideNav = false;

        const translateX = Math.min(0, this.currentX - this.startX);
        this.sideNavContainerEl.style.transform = '';

        if (translateX < 0) {
          this.hideSideNav();
        }
      }

      update () {
        if (!this.touchingSideNav)
          return;

        requestAnimationFrame(this.update);

        const translateX = Math.min(0, this.currentX - this.startX);
        this.sideNavContainerEl.style.transform = `translateX(${translateX}px)`;
      }

      blockClicks (evt) {
        evt.stopPropagation();
      }

      onTransitionEnd (evt) {
        this.sideNavEl.classList.remove('side-nav--animatable');
        this.sideNavEl.removeEventListener('transitionend', this.onTransitionEnd);
      }

      showSideNav () {
        this.sideNavEl.classList.add('side-nav--animatable');
        this.sideNavEl.classList.add('side-nav--visible');
        this.sideNavEl.addEventListener('transitionend', this.onTransitionEnd);
      }

      hideSideNav () {
        this.sideNavEl.classList.add('side-nav--animatable');
        this.sideNavEl.classList.remove('side-nav--visible');
        this.sideNavEl.addEventListener('transitionend', this.onTransitionEnd);
      }
    }

    new SideNav();

  </script>
  </body>
</html>
